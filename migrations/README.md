# SQL Migrations

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase.

## –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

–ú–∏–≥—Ä–∞—Ü–∏–∏ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ (—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º):

1. **supabase_migration.sql** - –û—Å–Ω–æ–≤–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (unit_moves, warehouse_cells_map view)
2. **unit_items_migration.sql** - –¢–∞–±–ª–∏—Ü–∞ unit_items
3. **fix_move_unit_auth.sql** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π
4. **supabase_migration_inventory.sql** - –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è (inventory_sessions, inventory_start/stop/status RPC)
5. **supabase_migration_inventory_counts.sql** - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∫–∞–Ω–æ–≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏ (inventory_cell_counts, inventory_cell_units)
6. **supabase_migration_inventory_close_cell.sql** - RPC –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —è—á–µ–µ–∫ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏
7. **supabase_migration_inventory_close_cell_fix.sql** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è inventory_close_cell
8. **supabase_migration_audit_events.sql** - –¢–∞–±–ª–∏—Ü–∞ audit_events –¥–ª—è –∞—É–¥–∏—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
9. **supabase_migration_audit_events_add_actor_name.sql** - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ actor_name –≤ audit_events
10. **supabase_migration_picking_tasks.sql** - –¢–∞–±–ª–∏—Ü—ã –¥–ª—è –∑–∞–¥–∞–Ω–∏–π –Ω–∞ —Å–±–æ—Ä–∫—É
11. **supabase_migration_performance_indexes.sql** - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

### –í Supabase Dashboard:
1. –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∫–æ–º–∞–Ω–¥—ã
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ß–µ—Ä–µ–∑ Supabase CLI:
```bash
supabase db push
```

## –í–∞–∂–Ω–æ

- ‚ö†Ô∏è **–í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ –ø—Ä–æ–¥–µ**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç `IF NOT EXISTS`, `CREATE OR REPLACE`)
- üìù –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
- üîí –ú–∏–≥—Ä–∞—Ü–∏–∏ —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä–æ–¥–µ - –Ω–µ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
