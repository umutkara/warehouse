# Safe Redesign 2026 - Checklist & Testing Guide

## Изменённые файлы

### Новые файлы (Design System)
1. ✅ `app/globals.css` - CSS переменные и базовые стили
2. ✅ `lib/ui/components/Button.tsx` - компонент кнопки
3. ✅ `lib/ui/components/Card.tsx` - компонент карточки
4. ✅ `lib/ui/components/Badge.tsx` - компонент бейджа
5. ✅ `lib/ui/components/Alert.tsx` - компонент алерта
6. ✅ `lib/ui/components/Input.tsx` - компонент инпута
7. ✅ `lib/ui/components/index.ts` - экспорт компонентов

### Обновлённые файлы (Layout & Pages)
8. ✅ `app/layout.tsx` - добавлен импорт globals.css
9. ✅ `app/app/ui/LeftNav.tsx` - новый дизайн с CSS переменными
10. ✅ `app/app/ui/TopBarExcel.tsx` - новый дизайн с CSS переменными
11. ✅ `app/app/tsd/page.tsx` - частично обновлено (Button, Alert компоненты)

### НЕ изменены (как требовалось)
- ❌ `app/login/**` - не трогались (1:1)
- ❌ API routes (`app/api/**`) - не изменялись
- ❌ SQL migrations - не изменялись
- ❌ RPC функции - не изменялись

## Чек-лист для ручного тестирования

### ✅ Базовые проверки
- [ ] `npm run build` проходит без ошибок
- [ ] Приложение запускается (`npm run dev`)
- [ ] Нет ошибок в консоли браузера

### ✅ Дизайн и UI
- [ ] Страница `/login` НЕ изменилась визуально (1:1)
- [ ] Левое меню выглядит современнее (новые цвета, отступы)
- [ ] Верхняя панель (TopBar) выглядит современнее
- [ ] CSS переменные работают (проверить в DevTools)
- [ ] Компоненты Button/Alert/Card выглядят одинаково везде

### ✅ Функциональность (ВАЖНО!)
- [ ] Перемещения unit'ов работают как раньше (`/app/putaway`, `/app/picking`)
- [ ] Сканирование в TSD работает как раньше (все 3 режима)
- [ ] Печать этикеток работает (`/app/cells/labels` - размеры и формат не изменились)
- [ ] Инвентаризация работает (старт/стоп/сканирование)
- [ ] Карта склада работает (фильтры, клики, перетаскивание)
- [ ] API запросы работают (проверить Network tab)

### ✅ Адаптивность (mobile)
- [ ] На узких экранах (< 768px) всё читабельно
- [ ] Кнопки достаточного размера для касания
- [ ] Текст читабельный без увеличения
- [ ] Нет горизонтального скролла

### ✅ Доступность
- [ ] Tab навигация работает
- [ ] Focus виден (focus-visible стили)
- [ ] Disabled кнопки не кликабельны
- [ ] Контраст текста достаточный

### ✅ Специфичные проверки по страницам

#### `/app/tsd`
- [ ] Все 3 режима переключаются (Приемка, Перемещение, Инвентаризация)
- [ ] Сканирование работает во всех режимах
- [ ] Ошибки отображаются красным Alert
- [ ] Успешные операции отображаются зелёным Alert
- [ ] Кнопки имеют правильные состояния (disabled/hover/active)

#### `/app/warehouse-map`
- [ ] Фильтры зон работают (StatPill клики)
- [ ] Клик по ячейке открывает детали
- [ ] Перетаскивание ячеек работает (если есть права)
- [ ] Создание/редактирование ячеек работает

#### `/app/receiving`, `/app/putaway`, `/app/picking`, `/app/shipping`
- [ ] Создание unit работает
- [ ] Выбор целевой ячейки работает
- [ ] Перемещение unit работает
- [ ] Таблицы/списки отображаются корректно

#### `/app/cells/labels`
- [ ] Печать этикеток работает
- [ ] Размеры этикеток правильные (58mm x 40mm)
- [ ] Штрихкод отображается корректно
- [ ] UI улучшен, но print логика не сломана

#### `/app/inventory`
- [ ] Старт/стоп инвентаризации работает
- [ ] Отображение статуса работает
- [ ] Сканирование ячеек работает (через TSD)

## Что проверить вручную (минимум 10 шагов)

### Шаг 1: Визуальная проверка login
1. Открой `/login`
2. ✅ Убедись что выглядит ровно так же как раньше
3. ✅ Логин работает, редирект на `/app/receiving`

### Шаг 2: Проверка layout
4. Открой любую страницу `/app/*`
5. ✅ Левое меню выглядит современнее (новые цвета)
6. ✅ Верхняя панель выглядит современнее
7. ✅ Все ссылки работают

### Шаг 3: Проверка TSD
8. Открой `/app/tsd`
9. ✅ Кнопки режимов выглядят современнее
10. ✅ Переключение режимов работает
11. ✅ Сканирование работает (попробовать все 3 режима)
12. ✅ Ошибки/успех отображаются через Alert компоненты

### Шаг 4: Проверка перемещений
13. Открой `/app/putaway`
14. ✅ Создание unit работает
15. ✅ Выбор ячейки работает
16. ✅ Перемещение unit работает (API call успешен)

### Шаг 5: Проверка карты склада
17. Открой `/app/warehouse-map`
18. ✅ Фильтры зон работают (клик по StatPill)
19. ✅ Клик по ячейке открывает детали
20. ✅ Все функции работают как раньше

### Шаг 6: Проверка печати
21. Открой `/app/cells/labels`
22. ✅ UI выглядит лучше
23. ✅ Кнопка "Print" работает
24. ✅ Этикетка печатается с правильными размерами

### Шаг 7: Проверка инвентаризации
25. Открой `/app/inventory`
26. ✅ Статус отображается
27. ✅ Кнопки "Начать"/"Завершить" работают
28. ✅ Сканирование через TSD работает

### Шаг 8: Проверка адаптивности
29. Открой DevTools, установи mobile viewport (375px)
30. ✅ Все страницы читабельны
31. ✅ Кнопки достаточно большие
32. ✅ Нет горизонтального скролла

### Шаг 9: Проверка доступности
33. Используй Tab для навигации
34. ✅ Focus виден на всех интерактивных элементах
35. ✅ Disabled элементы не получают focus

### Шаг 10: Финальная проверка
36. Проверь что нет ошибок в консоли браузера
37. ✅ Проверь Network tab - все API запросы возвращают ожидаемые ответы
38. ✅ Убедись что ничего не сломалось

## Рекомендации для продолжения

Для остальных страниц применять те же принципы:

1. **Заменить inline стили на CSS переменные:**
   - `#fff` → `var(--color-bg)`
   - `#111` → `var(--color-text)`
   - `16px` → `var(--spacing-lg)`
   - `8px` → `var(--radius-md)`

2. **Использовать компоненты:**
   - `<button>` → `<Button variant="primary">`
   - `<div style={{ background: "#fee" }}>` → `<Alert variant="error">`
   - `<div style={{ border: "1px solid #ddd" }}>` → `<Card>`

3. **Тестировать после каждого изменения:**
   - Build должен проходить
   - Функциональность должна работать
   - Визуал должен улучшиться

## Контрольные вопросы

- ✅ Design System создан и работает?
- ✅ Layout компоненты обновлены?
- ✅ `/login` не изменён?
- ✅ Build проходит?
- ✅ Ключевая функциональность работает?
- ✅ Примеры применения показаны?

## Итог

Базовый Design System создан и интегрирован. Layout компоненты обновлены. TSD страница частично обновлена как пример. Остальные страницы можно обновлять по аналогии.
